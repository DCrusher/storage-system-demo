(window["webpackJsonpstorage-system-demo"]=window["webpackJsonpstorage-system-demo"]||[]).push([[0],{308:function(e,t,n){e.exports=n(534)},448:function(e,t,n){},453:function(e,t){},455:function(e,t){},489:function(e,t){},490:function(e,t){},534:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),o=n.n(c),i=n(122),u=n(55),l=n(282),m=n.n(l),s=n(578),f=n(63),d=n.n(f),p=n(62),b=n.n(p),g=n(5),v=n(41),O=n(14),E=n(6),j=n(582),h=n(60),y=n.n(h),w=n(595),x=n(579),P=n(576),C=n(581),k=n(126),S=n.n(k);function I(){var e=Object(g.a)(["\n  margin-left: 20px;\n"]);return I=function(){return e},e}function D(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return D=function(){return e},e}var q=function(e){var t=e.onClose,n=e.children;return r.createElement(P.a,null,r.createElement(Q,null,n,t?r.createElement(W,{"aria-label":"close",onClick:t},r.createElement(S.a,null)):null))},z=function(e){var t=e.open,n=e.maxWidth,a=e.title,c=e.children,o=e.className,i=e.onClose,u=e.transitionDuration;return r.createElement(x.a,{open:t,onClose:i,className:o,maxWidth:n,transitionDuration:u},r.createElement(q,{onClose:i},a),c)},Q=E.b.div(D()),W=Object(E.b)(C.a)(I()),T=n(603),A=n(103);function F(){var e=Object(g.a)(["\n  margin-left: 10px 5px;\n"]);return F=function(){return e},e}function V(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 20px;\n"]);return V=function(){return e},e}function R(){var e=Object(g.a)(["\n  margin-top: 64px;\n"]);return R=function(){return e},e}var M=function(e){var t=e.open,n=e.caption,a=e.children,c=e.onClose;return r.createElement(T.a,{open:t,anchor:"right",variant:"persistent"},r.createElement(N,null,r.createElement(B,null,r.createElement(A.a,{component:"h3"},n),r.createElement(J,{"aria-label":"close",onClick:c},r.createElement(S.a,null))),r.createElement("div",null,a)))},N=E.b.div(R()),B=E.b.head(V()),J=Object(E.b)(C.a)(F()),U="create",$="edit",G="delete",H="view",K="redistribute",L=null,X=n(39),Y=n(18),Z=n(27),_=n(583),ee=n(602),te=n(288),ne=n(590),re=n(26),ae=n(67),ce=n(22),oe=n(50),ie=n.n(oe),ue=n(29),le=n(54);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=new(function(){function e(){Object(ue.a)(this,e)}return Object(le.a)(e,[{key:"createStorage",value:function(e){return new Promise((function(t){return setTimeout((function(){var n=se({},e,{id:ie()()});t(n)}),500)}))}},{key:"updateStorage",value:function(e){return new Promise((function(t){return setTimeout((function(){var n=se({},e);t(n)}),500)}))}},{key:"deleteStorage",value:function(e){return new Promise((function(t){return setTimeout((function(){return t(e)}),100)}))}}]),e}());function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=Object(ce.c)(),ge=be.event(),ve=be.event(),Oe=be.event(),Ee=be.event(),je=be.event(),he=be.event(),ye=be.store([]).on(ge,(function(e,t){return[].concat(Object(re.a)(e),[t])})).on(ve,(function(e,t){return e.filter((function(e){return e.productId!==t.productId&&e.storageId!==t.storageId}))})).on(Oe,(function(e,t){var n=t.id,r=t.products,a=e.filter((function(e){return e.storageId!==n})),c=r.map((function(e){return pe({storageId:n},e)}));return[].concat(Object(re.a)(a),Object(re.a)(c))})).on(Ee,(function(e,t){var n=t.id,r=t.storages,a=e.filter((function(e){return e.productId!==n})),c=r.map((function(e){return pe({productId:n},e)}));return[].concat(Object(re.a)(a),Object(re.a)(c))})).on(je,(function(e,t){var n=t.id,r=e.filter((function(e){return e.productId!==n}));return Object(re.a)(r)})).on(he,(function(e,t){var n=t.storage.id,r=t.allocation,a=e.filter((function(e){return e.storageId!==n})),c=r.filter((function(e){return"void"!==e.storageId}));return[].concat(Object(re.a)(a),Object(re.a)(c))})),we=Object(ce.c)(),xe=we.effect(),Pe=we.effect(),Ce=we.effect();xe.use(fe.createStorage),Pe.use(fe.updateStorage),Ce.use(fe.deleteStorage);var ke=[{id:ie()(),name:"storage 1"},{id:ie()(),name:"storage 2"},{id:ie()(),name:"storage 3"}],Se=we.store(ke).on(xe.done,(function(e,t){var n=t.result,r=n.products,a=Object(ae.a)(n,["products"]);return r&&r.forEach((function(e){var t=e.productId,n=e.quantity;ge({storageId:a.id,productId:t,quantity:n})})),[].concat(Object(re.a)(e),[a])})).on(Pe.done,(function(e,t){var n=t.result,r=(n.products,Object(ae.a)(n,["products"]));Oe(n);var a=e.filter((function(e){return e.id!==n.id}));return[].concat(Object(re.a)(a),[r])})).on(Ce.done,(function(e,t){var n=t.result;return e.filter((function(e){return e.id!==n.id}))})),Ie=n(61),De=n.n(Ie),qe=n(604),ze=n(601),Qe=n(588),We=n(589);function Te(){var e=Object(g.a)(["\n  width: 100%;\n  margin-top: 16px;\n  margin-bottom: 8px;\n"]);return Te=function(){return e},e}function Ae(){var e=Object(g.a)(["\n  color: gray;\n  font-weight: bold;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Ae=function(){return e},e}var Fe=function(e){var t=e.storagesWithQuantity,n=e.storages,a=e.onChange;return r.createElement(X.a,{name:"storages",render:function(e){return r.createElement(r.Fragment,null,r.createElement(Ve,null,r.createElement("span",null,"Storages"),r.createElement(j.a,{variant:"extended",size:"medium","aria-label":"Add",onClick:function(){return e.push("")}},r.createElement(y.a,null),"Add")),t&&t.length>0&&t.map((function(t,c){return r.createElement(_.a,{container:!0,alignItems:"center",spacing:1},r.createElement(_.a,{item:!0,xs:6},r.createElement(Re,null,r.createElement(qe.a,{htmlFor:"storage-select"},"Storage"),r.createElement(ze.a,{value:t.storageId,inputProps:{name:"storages.".concat(c,".storageId"),id:"storage-select"},onChange:a,autoWidth:!0},n.map((function(e){var t=e.id,n=e.name;return r.createElement(Qe.a,{key:t,value:t},n)}))))),r.createElement(_.a,{item:!0,xs:4},r.createElement(ee.a,{name:"storages.".concat(c,".quantity"),label:"Quantity",margin:"normal",type:"number",onChange:a,value:t.quantity,fullWidth:!0})),r.createElement(_.a,{item:!0,xs:2},r.createElement(C.a,{"aria-label":"delete",onClick:function(){return e.remove(c)}},r.createElement(De.a,null))))})))}})},Ve=E.b.div(Ae()),Re=Object(E.b)(We.a)(Te());function Me(e){return!e||(Array.isArray(e)?0===e.length:0===Object.entries(e).length&&e.constructor===Object)}function Ne(){var e=Object(g.a)(["\n  color: red;\n"]);return Ne=function(){return e},e}var Be=function(e){var t,n,a,c=e.errors;return Me(c)?null:r.createElement(Je,null,r.createElement(A.a,{component:"h4"},"Form has errors"),r.createElement("pre",null,(t=c,n=2,JSON.stringify(t,a,n).replace(/({|}|\[|\]|null)/gi,""))))},Je=E.b.div(Ne());function Ue(){var e=Object(g.a)(["\n  margin-top: 40px;\n  width: 100%;\n  border-radius: 0;\n"]);return Ue=function(){return e},e}function $e(){var e=Object(g.a)(["\n  margin: 20px 0;\n  padding: 20px;\n"]);return $e=function(){return e},e}function Ge(){var e=Object(g.a)(["\n  margin: 0 20px;\n"]);return Ge=function(){return e},e}function He(){var e=Object(g.a)(["\n  padding: 0 20px;\n"]);return He=function(){return e},e}function Ke(){var e=Object(g.a)(["\n  width: 500px;\n  margin: auto;\n"]);return Ke=function(){return e},e}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xe=Z.lazy((function(e){var t=e.storages,n=e.totalQuantity,r=Me(t)?0:t.reduce((function(e,t){return e+t.quantity}),0);return Z.object().shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:Z.string().required("Please input name"),totalQuantity:Z.number().required("Total quantity is required").min(0)},r>n&&{allocation:Z.string().required("Exceeded total quantity")}))})),Ye=function(e){var t=e.initialValues,n=e.submitCaption,a=e.onSubmit,c=Object(Y.a)(Se);return r.createElement(X.b,{initialValues:t,validationSchema:Xe,validateOnChange:!1,onSubmit:a},(function(e){var t=e.values,a=e.handleSubmit,o=e.handleChange,i=e.errors;return r.createElement(Ze,{onSubmit:a},r.createElement(et,null,i&&r.createElement(Be,{errors:i})),r.createElement(_e,null,r.createElement(_.a,{container:!0,spacing:2},r.createElement(_.a,{item:!0,xs:7},r.createElement(ee.a,{id:"name",label:"Name",margin:"normal",type:"text",onChange:o,value:t.name,fullWidth:!0})),r.createElement(_.a,{item:!0,xs:5},r.createElement(ee.a,{id:"totalQuantity",label:"Total Quantity",margin:"normal",type:"number",onChange:o,value:t.totalQuantity,fullWidth:!0}))),r.createElement(tt,null,r.createElement(Fe,{storagesWithQuantity:t.storages,storages:c,onChange:o}))),r.createElement(nt,{type:"submit",variant:"contained",color:"primary",size:"large"},n))}))},Ze=E.b.form(Ke()),_e=E.b.div(He()),et=E.b.div(Ge()),tt=Object(E.b)(te.a)($e()),nt=Object(E.b)(ne.a)(Ue()),rt=n(587),at=n(539),ct=n(591),ot=n(607),it=n(592),ut=n(593),lt=n(594),mt=n(132),st=n.n(mt);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=new(function(){function e(){Object(ue.a)(this,e)}return Object(le.a)(e,[{key:"createProduct",value:function(e){return new Promise((function(t){return setTimeout((function(){var n=dt({},e,{id:ie()()});t(n)}),500)}))}},{key:"updateProduct",value:function(e){return new Promise((function(t){return setTimeout((function(){var n=dt({},e);t(n)}),500)}))}},{key:"deleteProduct",value:function(e){return new Promise((function(t){return setTimeout((function(){return t(e)}),100)}))}}]),e}());function bt(e){var t=e.name,n=e.totalQuantity;return{id:ie()(),name:t,totalQuantity:n}}var gt=Object(ce.c)(),vt=gt.effect(),Ot=gt.effect(),Et=gt.effect();vt.use(pt.createProduct),Ot.use(pt.updateProduct),Et.use(pt.deleteProduct);var jt=[bt({name:"product 1",totalQuantity:10}),bt({name:"product 2",totalQuantity:20}),bt({name:"product 3",totalQuantity:30})],ht=gt.store(jt).on(vt.done,(function(e,t){var n=t.result,r=n.storages,a=Object(ae.a)(n,["storages"]);return r&&r.forEach((function(e){var t=e.storageId,n=e.quantity;ge({productId:a.id,storageId:t,quantity:n})})),[].concat(Object(re.a)(e),[a])})).on(Ot.done,(function(e,t){var n=t.result,r=(n.storages,Object(ae.a)(n,["storages"]));Ee(n);var a=e.filter((function(e){return e.id!==n.id}));return[].concat(Object(re.a)(a),[r])})).on(Et.done,(function(e,t){var n=t.result;return je({id:n.id}),e.filter((function(e){return e.id!==n.id}))}));function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wt=function(e){var t=e.onEdit,n=e.onDelete,a=e.onView,c=Object(Y.a)(ht),o=Object(Y.a)(ye);return r.createElement(rt.a,null,c.map((function(e,i){var u=0,l=0,m=[],s=e.id,f=e.name,d=e.totalQuantity;return o.forEach((function(t){var n=t.storageId,r=t.productId,a=t.quantity;r===e.id&&(m.push({storageId:n,quantity:a}),u++,l+=a)})),r.createElement(r.Fragment,{key:s},r.createElement(at.a,{button:!0,onClick:function(){return a(e)}},r.createElement(ct.a,null,r.createElement(ot.a,{title:"Total quantity of product: ".concat(d)},r.createElement(it.a,{badgeContent:d,color:"primary",max:1e3,anchorOrigin:{horizontal:"left",vertical:"bottom"}},r.createElement(b.a,null)))),r.createElement(ut.a,{primary:f,secondary:"Storages: ".concat(u,", Quantity in strages: ").concat(l)}),r.createElement(lt.a,null,r.createElement(C.a,{onClick:function(){n(e)}},r.createElement(De.a,null)),r.createElement(C.a,{onClick:function(){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{storages:m}))}},r.createElement(st.a,null)))),i<c.length-1&&r.createElement(w.a,null))})))};function xt(){var e=Object(g.a)(["\n  text-align: center;\n"]);return xt=function(){return e},e}function Pt(){var e=Object(g.a)(["\n  margin-top: 40px;\n  width: 100%;\n  border-radius: 0;\n"]);return Pt=function(){return e},e}var Ct=function(e){var t=e.onDelete;return r.createElement(r.Fragment,null,r.createElement(St,null,r.createElement("div",null,"Are you shure to delete the product? "),r.createElement("div",null,"It will removed from all storages.")),r.createElement(kt,{variant:"contained",color:"primary",size:"large",onClick:t},"delete"))},kt=Object(E.b)(ne.a)(Pt()),St=E.b.div(xt());function It(){var e=Object(g.a)(["\n  margin: 20px;\n  color: lightgray;\n"]);return It=function(){return e},e}function Dt(){var e=Object(g.a)(["\n  margin: 5px 20px;\n"]);return Dt=function(){return e},e}function qt(){var e=Object(g.a)(["\n  width: 250px;\n"]);return qt=function(){return e},e}var zt,Qt,Wt=function(e){var t=e.product,n=Object(Y.a)(ye),a=Object(Y.a)(Se),c=n.filter((function(e){return e.productId===t.id}));return r.createElement(Tt,null,r.createElement(At,null,"Total quantity: ",t.totalQuantity),Me(c)?r.createElement(Ft,null,"Product isn't allocated"):r.createElement(rt.a,null,c.map((function(e){var t=e.productId,n=e.storageId,c=e.quantity,o=a.find((function(e){return e.id===n}))||{name:""};return r.createElement(at.a,{key:n+t,button:!0},r.createElement(ct.a,null,r.createElement(d.a,null)),r.createElement(ut.a,null,o.name,": ",c))}))))},Tt=E.b.div(qt()),At=E.b.div(Dt()),Ft=E.b.div(It());function Vt(){var e=Object(g.a)(["\n  margin: 20px 0;\n"]);return Vt=function(){return e},e}function Rt(){var e=Object(g.a)(["\n  width: 100%;\n"]);return Rt=function(){return e},e}var Mt={id:"",name:"",totalQuantity:1,storages:[{storageId:"",quantity:0}]},Nt=(zt={},Object(O.a)(zt,U,"Creating product"),Object(O.a)(zt,$,"Editing product"),Object(O.a)(zt,G,"Deleting product"),zt),Bt=(Qt={},Object(O.a)(Qt,U,"Create"),Object(O.a)(Qt,G,"Delete"),Object(O.a)(Qt,$,"Update"),Qt),Jt=function(){var e,t=r.useState(L),n=Object(v.a)(t,2),a=n[0],c=n[1],o=r.useState(Mt),i=Object(v.a)(o,2),u=i[0],l=i[1],m=a===$,s=a===G,f=a===U||m||s,d=a===H;return r.createElement(Ut,null,r.createElement(j.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Add",onClick:function(){c(U),l(Mt)}},r.createElement(y.a,null),"Add product"),r.createElement($t,null),r.createElement(wt,{onDelete:function(e){c(G),l(e)},onEdit:function(e){c($),l(e)},onView:function(e){c(H),l(e)}}),r.createElement(z,{onClose:function(){c(L)},title:Nt[a||""],open:f,transitionDuration:{exit:0}},s?r.createElement(Ct,{onDelete:(e=u,function(){Et(e),c(L)})}):r.createElement(Ye,{initialValues:u,onSubmit:m?function(e){Ot(e),c(L)}:function(e){vt(e),c(L)},submitCaption:Bt[a||""]})),r.createElement(M,{open:d,onClose:function(){c(L)},caption:u.name},r.createElement(Wt,{product:u})))},Ut=E.b.div(Rt()),$t=Object(E.b)(w.a)(Vt());function Gt(){var e=Object(g.a)(["\n  width: 100%;\n  margin-top: 16px;\n  margin-bottom: 8px;\n"]);return Gt=function(){return e},e}function Ht(){var e=Object(g.a)(["\n  color: gray;\n  font-weight: bold;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Ht=function(){return e},e}var Kt=function(e){var t=e.productsWithQuantity,n=e.products,a=e.onChange;return r.createElement(X.a,{name:"products",render:function(e){return r.createElement(r.Fragment,null,r.createElement(Lt,null,r.createElement("span",null,"Products"),r.createElement(j.a,{variant:"extended",size:"medium","aria-label":"Add",onClick:function(){return e.push("")}},r.createElement(y.a,null),"Add")),t&&t.length>0&&t.map((function(t,c){return r.createElement(_.a,{container:!0,alignItems:"center",spacing:1},r.createElement(_.a,{item:!0,xs:6},r.createElement(Xt,null,r.createElement(qe.a,{htmlFor:"product-select"},"Product"),r.createElement(ze.a,{value:t.productId,inputProps:{name:"products.".concat(c,".productId"),id:"product-select"},onChange:a,autoWidth:!0},n.map((function(e){var t=e.id,n=e.name;return r.createElement(Qe.a,{key:t,value:t},n)}))))),r.createElement(_.a,{item:!0,xs:4},r.createElement(ee.a,{name:"products.".concat(c,".quantity"),label:"Quantity",margin:"normal",type:"number",onChange:a,value:t.quantity,fullWidth:!0})),r.createElement(_.a,{item:!0,xs:2},r.createElement(C.a,{"aria-label":"delete",onClick:function(){return e.remove(c)}},r.createElement(De.a,null))))})))}})},Lt=E.b.div(Ht()),Xt=Object(E.b)(We.a)(Gt());function Yt(){var e=Object(g.a)(["\n  margin-top: 40px;\n  width: 100%;\n  border-radius: 0;\n"]);return Yt=function(){return e},e}function Zt(){var e=Object(g.a)(["\n  margin: 20px 0;\n  padding: 20px;\n"]);return Zt=function(){return e},e}function _t(){var e=Object(g.a)(["\n  padding: 0 20px;\n"]);return _t=function(){return e},e}function en(){var e=Object(g.a)(["\n  width: 500px;\n  margin: auto;\n"]);return en=function(){return e},e}function tn(){var e=Object(g.a)(["\n  margin: 0 20px;\n"]);return tn=function(){return e},e}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rn=function(e){var t=e.initialValues,n=e.submitCaption,a=e.onSubmit,c=Object(Y.a)(ht),o=Object(Y.a)(ye),i=Z.lazy((function(e){var t=e.products,n={};return Me(c)||t.forEach((function(e){var t=e.productId,r=e.quantity,a=c.find((function(e){return e.id===t}))||{totalQuantity:0,name:""},i=o.reduce((function(e,n){return n.productId===t&&(e+=n.quantity),e}),0),u=a.totalQuantity-i;r>u&&(n[a.name]=Z.string().required("Quantity exceeded. Available only: ".concat(u)))})),Z.object().shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:Z.string().required("Please input name")},n))}));return r.createElement(X.b,{initialValues:t,validationSchema:i,validateOnChange:!1,onSubmit:a},(function(e){var t=e.values,a=e.handleSubmit,o=e.handleChange,i=e.errors;return r.createElement(cn,{onSubmit:a},r.createElement(an,null,i&&r.createElement(Be,{errors:i})),r.createElement(on,null,r.createElement(ee.a,{id:"name",label:"Name",margin:"normal",type:"text",onChange:o,value:t.name,fullWidth:!0}),r.createElement(un,null,r.createElement(Kt,{productsWithQuantity:t.products,products:c,onChange:o}))),r.createElement(ln,{type:"submit",variant:"contained",color:"primary",size:"large"},n))}))},an=E.b.div(tn()),cn=E.b.form(en()),on=E.b.div(_t()),un=Object(E.b)(te.a)(Zt()),ln=Object(E.b)(ne.a)(Yt());function mn(){var e=Object(g.a)(["\n  width: 100%;\n  margin-top: 16px;\n  margin-bottom: 8px;\n"]);return mn=function(){return e},e}var sn=function(e){var t=e.allocation,n=e.storages,a=e.products,c=e.disabled,o=e.onChange;return r.createElement(X.a,{name:"allocation",render:function(e){return r.createElement(r.Fragment,null,t&&t.length>0&&t.map((function(e,t){return r.createElement(_.a,{container:!0,alignItems:"center",spacing:1},r.createElement(_.a,{item:!0,xs:4},r.createElement(fn,null,r.createElement(qe.a,{htmlFor:"storage-select"},"Storage"),r.createElement(ze.a,{value:e.storageId,inputProps:{name:"allocation.".concat(t,".storageId"),id:"storage-select"},onChange:o,disabled:c&&c.storage,autoWidth:!0},n.map((function(e){var t=e.id,n=e.name;return r.createElement(Qe.a,{key:t,value:t},n)}))))),r.createElement(_.a,{item:!0,xs:4},r.createElement(fn,null,r.createElement(qe.a,{htmlFor:"product-select"},"Product"),r.createElement(ze.a,{value:e.productId,inputProps:{name:"allocation.".concat(t,".productId"),id:"product-select"},onChange:o,disabled:c&&c.product,autoWidth:!0},a.map((function(e){var t=e.id,n=e.name;return r.createElement(Qe.a,{key:t,value:t},n)}))))),r.createElement(_.a,{item:!0,xs:4},r.createElement(ee.a,{name:"allocation.".concat(t,".quantity"),label:"Quantity",margin:"normal",type:"number",onChange:o,value:e.quantity,disabled:c&&c.quantity,fullWidth:!0})))})))}})},fn=Object(E.b)(We.a)(mn());function dn(){var e=Object(g.a)(["\n  text-align: center;\n"]);return dn=function(){return e},e}function pn(){var e=Object(g.a)(["\n  margin-top: 40px;\n  width: 100%;\n  border-radius: 0;\n"]);return pn=function(){return e},e}function bn(){var e=Object(g.a)(["\n  padding: 0 20px;\n"]);return bn=function(){return e},e}function gn(){var e=Object(g.a)(["\n  margin: 0 20px;\n"]);return gn=function(){return e},e}function vn(){var e=Object(g.a)(["\n  width: 600px;\n  margin: auto;\n"]);return vn=function(){return e},e}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var En=Z.object().shape({allocation:Z.array().of(Z.object().shape({storageId:Z.string().required("Please select a specific storage for the product")}))}),jn=function(e){var t=e.submitCaption,n=e.storage,a=e.onSubmit,c=e.onDelete,o=Object(Y.a)(ht),i=Object(Y.a)(Se),u=Object(Y.a)(ye).filter((function(e){return e.storageId===n.id})).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{storageId:""})})),l=i.filter((function(e){return e.id!==n.id}));l.unshift({id:"void",name:"Unallocated"});return Me(u)?r.createElement(r.Fragment,null,r.createElement(Pn,null,"The storage is empty. Do you want to remove it?"),r.createElement(xn,{variant:"contained",color:"primary",size:"large",onClick:function(e){c(n)}},"delete")):r.createElement(X.b,{initialValues:{allocation:u},validationSchema:En,validateOnChange:!1,onSubmit:function(e){a(e.allocation,n)}},(function(e){var n=e.values,a=e.handleSubmit,c=e.handleChange,i=e.errors;return r.createElement(hn,{onSubmit:a},r.createElement(yn,null,i&&r.createElement(Be,{errors:i.allocation})),r.createElement(wn,null,r.createElement(sn,{allocation:n.allocation,products:o,storages:l,disabled:{product:!0,quantity:!0},onChange:c})),r.createElement(xn,{type:"submit",variant:"contained",color:"primary",size:"large"},t))}))},hn=E.b.form(vn()),yn=E.b.div(gn()),wn=E.b.div(bn()),xn=Object(E.b)(ne.a)(pn()),Pn=E.b.div(dn());function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kn=function(e){var t=e.onEdit,n=e.onDelete,a=e.onView,c=Object(Y.a)(Se),o=Object(Y.a)(ye);return r.createElement(rt.a,null,c.map((function(e,i){var u=0,l=0,m=[];return o.forEach((function(t){var n=t.storageId,r=t.productId,a=t.quantity;n===e.id&&(m.push({productId:r,quantity:a}),u++,l+=a)})),r.createElement(r.Fragment,{key:e.id},r.createElement(at.a,{button:!0,onClick:function(){return a(e)}},r.createElement(ct.a,null,r.createElement(d.a,null)),r.createElement(ut.a,{primary:e.name,secondary:"Product positions: ".concat(u,", Total quantity: ").concat(l)}),r.createElement(lt.a,null,r.createElement(C.a,{onClick:function(){n(e)}},r.createElement(De.a,null)),r.createElement(C.a,{onClick:function(){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{products:m}))}},r.createElement(st.a,null)))),i<c.length-1&&r.createElement(w.a,null))})))};function Sn(){var e=Object(g.a)(["\n  margin: 20px;\n  color: lightgray;\n"]);return Sn=function(){return e},e}function In(){var e=Object(g.a)(["\n  width: 250px;\n"]);return In=function(){return e},e}var Dn,qn,zn=function(e){var t=e.storage,n=Object(Y.a)(ye),a=Object(Y.a)(ht),c=n.filter((function(e){return e.storageId===t.id}));return r.createElement(Qn,null,Me(c)?r.createElement(Wn,null,"Storage is empty"):r.createElement(rt.a,null,c.map((function(e){var t=e.productId,n=e.storageId,c=e.quantity,o=a.find((function(e){return e.id===t}))||{name:""};return r.createElement(at.a,{key:t+n,button:!0},r.createElement(ct.a,null,r.createElement(b.a,null)),r.createElement(ut.a,null,o.name,": ",c))}))))},Qn=E.b.div(In()),Wn=E.b.div(Sn());function Tn(){var e=Object(g.a)(["\n  margin: 20px 0;\n"]);return Tn=function(){return e},e}function An(){var e=Object(g.a)(["\n  width: 100%;\n"]);return An=function(){return e},e}var Fn={id:"",name:"",products:[{productId:"",quantity:0}]},Vn=(Dn={},Object(O.a)(Dn,U,"Creating storage"),Object(O.a)(Dn,$,"Editing storage"),Object(O.a)(Dn,K,"Redistribute before delete"),Dn),Rn=(qn={},Object(O.a)(qn,U,"Create"),Object(O.a)(qn,$,"Update"),Object(O.a)(qn,K,"Redestribute and delete"),qn),Mn=function(){var e=r.useState(L),t=Object(v.a)(e,2),n=t[0],a=t[1],c=r.useState(Fn),o=Object(v.a)(c,2),i=o[0],u=o[1],l=n===$,m=n===U||l||n===G||n===K,s=n===H;return r.createElement(Nn,null,r.createElement(j.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Add",onClick:function(){a(U),u(Fn)}},r.createElement(y.a,null),"Add storage"),r.createElement(Bn,null),r.createElement(kn,{onDelete:function(e){u(e),a(K)},onEdit:function(e){a($),u(e)},onView:function(e){a(H),u(e)}}),r.createElement(z,{open:m,onClose:function(){a(L)},title:n&&Vn[n],transitionDuration:{exit:0}},n===K?r.createElement(jn,{submitCaption:Rn[n||""],storage:i,onSubmit:function(e,t){he({storage:t,allocation:e}),Ce(t),a(L)},onDelete:function(e){Ce(e),a(L)}}):r.createElement(rn,{initialValues:i,onSubmit:l?function(e){Pe(e),a(L)}:function(e){xe(e),a(L)},submitCaption:Rn[n||""]})),r.createElement(M,{open:s,onClose:function(){a(L)},caption:i.name},r.createElement(zn,{storage:i})))},Nn=E.b.div(An()),Bn=Object(E.b)(w.a)(Tn()),Jn={root:{path:"/",caption:"Dashboard"},app:{products:{path:"/products",caption:"Products",Icon:b.a,Scene:Jt},storages:{path:"/storages",caption:"Storages",Icon:d.a,Scene:Mn}},auth:{signin:{path:"/signin"}}},Un=(n(448),n(283)),$n=n(274),Gn=n.n($n),Hn=n(275),Kn=n.n(Hn),Ln=n(276),Xn=n.n(Ln),Yn=Object(Un.a)({palette:{primary:Gn.a,secondary:Kn.a,error:Xn.a,contrastThreshold:3,tonalOffset:.2}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zn=n(102),_n=n.n(Zn),er=n(176),tr=n.n(er),nr="storage-system-demo-app",rr=new(function(){function e(){Object(ue.a)(this,e)}return Object(le.a)(e,[{key:"signin",value:function(e,t){_n.a.set("token",tr.a.encode({user:e},nr))}},{key:"signout",value:function(){_n.a.set("token","")}},{key:"isAuthorized",value:function(){return _n.a.get("token")}},{key:"user",get:function(){var e=_n.a.get("token")||"";return tr.a.decode(e,nr).user}}]),e}()),ar=function(e){var t=e.component,n=e.redirectTo,a=Object(ae.a)(e,["component","redirectTo"]);return r.createElement(u.Route,Object.assign({},a,{render:function(e){return rr.isAuthorized()?r.createElement(t,e):r.createElement(u.Redirect,{to:n})}}))},cr=n(64),or=n.n(cr);function ir(){var e=Object(g.a)(["\n  font-size: 30px;\n  width: 400px;\n  height: 400px;\n"]);return ir=function(){return e},e}var ur=function(e){var t=e.children,n=e.counter,a=e.onClick;return r.createElement(lr,{onClick:a,variant:"contained",color:"primary"},r.createElement(it.a,{badgeContent:n,color:"secondary"},t))},lr=Object(E.b)(ne.a)(ir());function mr(){var e=Object(g.a)(["\n  margin: 0 20px;\n  font-size: 60px;\n"]);return mr=function(){return e},e}function sr(){var e=Object(g.a)(["\n  margin: 0 20px;\n  font-size: 60px;\n"]);return sr=function(){return e},e}function fr(){var e=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > :first-child {\n    margin-right: 20px;\n  }\n"]);return fr=function(){return e},e}var dr=function(){var e=or()().history,t=Jn.app.products,n=Jn.app.storages,a=Object(Y.a)(Se),c=Object(Y.a)(ht);return r.createElement(pr,null,r.createElement(ur,{onClick:function(){return e.push(t.path,t.caption)},counter:a.length},"Products",r.createElement(gr,null)),r.createElement(ur,{onClick:function(){return e.push(n.path,n.caption)},counter:c.length},"Storages",r.createElement(br,null)))},pr=E.b.div(fr()),br=Object(E.b)(d.a)(sr()),gr=Object(E.b)(b.a)(mr()),vr=n(606),Or=n(597),Er=n(598),jr=n(280),hr=n.n(jr),yr=n(599),wr=n(278),xr=n.n(wr),Pr=n(279),Cr=n.n(Pr),kr=n(277),Sr=n.n(kr),Ir=n(284);function Dr(){var e=Object(g.a)(["\n  .MuiMenu-list {\n    display: flex;\n    flex-direction: column;\n    min-width: 160px;\n  }\n"]);return Dr=function(){return e},e}function qr(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  color: #fff;\n"]);return qr=function(){return e},e}function zr(){var e=Object(g.a)(["\n  font-size: 45px;\n  margin: 0 10px;\n"]);return zr=function(){return e},e}var Qr=function(){var e=r.useState(null),t=Object(v.a)(e,2),n=t[0],a=t[1],c=or()().history;return r.createElement(r.Fragment,null,r.createElement(Tr,{onClick:function(e){a(e.currentTarget)}},r.createElement(Wr,null),rr.user),r.createElement(Ar,{anchorEl:n,getContentAnchorEl:null,onClose:function(){a(null)},open:Boolean(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0},r.createElement(Qe.a,{onClick:function(){a(null),rr.signout(),c.push(Jn.auth.signin.path)}},"Sign out")))},Wr=Object(E.b)(Sr.a)(zr()),Tr=Object(E.b)(ne.a)(qr()),Ar=Object(E.b)(Ir.a)(Dr()),Fr=n(596),Vr=Object.values(Jn.app),Rr=function(e){var t=e.onChange;return r.createElement(rt.a,null,Vr.map((function(e){var n=e.path,a=e.Icon,c=e.caption;return r.createElement(at.a,{key:c,onClick:function(){return t(n,c)},button:!0},r.createElement(Fr.a,null,r.createElement(a,null)),r.createElement(ut.a,{primary:c}))})))};function Mr(){var e=Object(g.a)(["\n  margin-top: 64px;\n  padding-top: 32px;\n  padding-bottom: 32px;\n"]);return Mr=function(){return e},e}function Nr(){var e=Object(g.a)(["\n  flex-grow: 1;\n  height: 100vh;\n  overflow: auto;\n"]);return Nr=function(){return e},e}function Br(){var e=Object(g.a)(["\n  display: flex;\n  padding: 0 8px;\n  align-items: center;\n  justify-content: space-between;\n  min-height: 64px;\n"]);return Br=function(){return e},e}function Jr(){var e=Object(g.a)(["\n  margin-right: 5px;\n"]);return Jr=function(){return e},e}function Ur(){var e=Object(g.a)(["\n  font-size: 16px;\n  cursor: pointer;\n  display: flex;\n  text-transform: uppercase;\n  font-weight: bold;\n  align-items: center;\n  text-shadow: 7px 5px #e4e4e4;\n"]);return Ur=function(){return e},e}function $r(){var e=Object(g.a)(["\n  flex-grow: 1;\n"]);return $r=function(){return e},e}function Gr(){var e=Object(g.a)(["\n            logooverflow-x: hidden;\n            width: 72px;\n            transition: width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;\n          "]);return Gr=function(){return e},e}function Hr(){var e=Object(g.a)(["\n            white-space: nowrap;\n            width: 240px;\n            transition: width 225ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;\n          "]);return Hr=function(){return e},e}function Kr(){var e=Object(g.a)(["\n  .MuiDrawer-paper {\n    position: relative;\n\n    ","\n  }\n"]);return Kr=function(){return e},e}function Lr(){var e=Object(g.a)(["\n  margin-right: 36px;\n"]);return Lr=function(){return e},e}function Xr(){var e=Object(g.a)(["\n  padding-right: 24px;\n"]);return Xr=function(){return e},e}function Yr(){var e=Object(g.a)(["\n  width: ",";\n  margin-left: ","px;\n  z-index: 1201;\n  transition: width 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms,\n    margin 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;\n"]);return Yr=function(){return e},e}function Zr(){var e=Object(g.a)(["\n  display: flex;\n"]);return Zr=function(){return e},e}var _r=function(e){var t=e.children,n=e.currentCaption,a=e.onChangePath,c=r.useState(!0),o=Object(v.a)(c,2),i=o[0],u=o[1],l=Jn.root;return r.createElement(ea,null,r.createElement(vr.a,null),r.createElement(ta,{position:"absolute",open:i},r.createElement(na,null,!i&&r.createElement(ra,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)}},r.createElement(xr.a,null)),r.createElement(ca,{component:"h1",variant:"h6",color:"inherit",noWrap:!0},n),r.createElement(Qr,null))),r.createElement(aa,{variant:"permanent",open:i},r.createElement(ua,null,r.createElement(oa,{color:"primary",variant:"h6",onClick:function(){a(l.path,l.caption)}},r.createElement(ia,null),"Megastorage"),r.createElement(C.a,{onClick:function(){u(!1)}},r.createElement(Cr.a,null))),r.createElement(w.a,null),r.createElement(Rr,{onChange:a})),r.createElement(la,null,r.createElement(ma,{maxWidth:"lg"},r.createElement(_.a,{container:!0},t))))},ea=E.b.div(Zr()),ta=Object(E.b)(Or.a)(Yr(),(function(e){return e.open?"calc(100% - ".concat(240,"px)"):"100%"}),240),na=Object(E.b)(Er.a)(Xr()),ra=Object(E.b)(C.a)(Lr()),aa=Object(E.b)(T.a)(Kr(),(function(e){return e.open?Object(E.a)(Hr()):Object(E.a)(Gr())})),ca=Object(E.b)(A.a)($r()),oa=Object(E.b)(A.a)(Ur()),ia=Object(E.b)(hr.a)(Jr()),ua=E.b.div(Br()),la=E.b.main(Nr()),ma=Object(E.b)(yr.a)(Mr()),sa=Object.values(Jn.app),fa=function(){var e=or()(),t=e.history,n=e.location,r=a.a.useState(n.state),c=Object(v.a)(r,2),o=c[0],i=c[1];return a.a.createElement(_r,{onChangePath:function(e,n){t.push(e,n),i(n)},currentCaption:o},a.a.createElement(u.Route,{exact:!0,path:Jn.root.path,component:dr}),sa.map((function(e){var t=e.path,n=e.Scene;return a.a.createElement(u.Route,{key:n,path:t,component:n})})))},da=n(600),pa=n(281),ba=n.n(pa);function ga(){var e=Object(g.a)(["\n  margin: 10px;\n  background-color: red;\n"]);return ga=function(){return e},e}function va(){var e=Object(g.a)(["\n  margintop: 100ox;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return va=function(){return e},e}var Oa=function(e){var t=e.children;return r.createElement(yr.a,{component:"main",maxWidth:"xs"},r.createElement(vr.a,null),r.createElement(Ea,null,r.createElement(ja,null,r.createElement(ba.a,null)),t))},Ea=E.b.div(va()),ja=Object(E.b)(da.a)(ga());function ha(){var e=Object(g.a)(["\n  margin: 10px 0;\n"]);return ha=function(){return e},e}function ya(){var e=Object(g.a)(["\n  width: 100%;\n  margin-top: 10px;\n"]);return ya=function(){return e},e}var wa=function(){var e=or()().history;return r.createElement(Oa,null,r.createElement(A.a,{component:"h1",variant:"h5"},"Sign in"),r.createElement(xa,{onSubmit:function(t){t.preventDefault();var n=t.currentTarget.elements;rr.signin(n.email.value,n.password.value),e.push(Jn.root.path)}},r.createElement(ee.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.createElement(ee.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.createElement(Pa,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0},"Sign In")))},xa=E.b.form(ya()),Pa=Object(E.b)(ne.a)(ha());o.a.render(a.a.createElement(s.b,{injectFirst:!0},a.a.createElement(m.a,{theme:Yn},a.a.createElement(i.a,null,a.a.createElement(u.Route,{path:Jn.auth.signin.path,component:wa}),a.a.createElement(ar,{path:Jn.root.path,redirectTo:Jn.auth.signin.path,component:fa})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[308,1,2]]]);
//# sourceMappingURL=main.23d71c03.chunk.js.map